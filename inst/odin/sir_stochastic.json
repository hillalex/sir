{"version":"1.2.1","config":{"base":"sir_stochastic","include":null,"custom":null},"meta":{"internal":"internal","user":"user","state":"state","result":"state_next","output":"output","time":"step","initial_time":"initial_step"},"features":{"discrete":true,"has_array":true,"has_output":false,"has_user":true,"has_delay":false,"has_interpolate":false,"has_stochastic":true,"has_include":false,"initial_time_dependent":false},"data":{"elements":[{"name":"beta","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_I","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_N","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_n_IR","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_n_SI","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_p_SI","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_R","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_S","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"I","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_I","dim":[],"mult":[]},"stage":"time"},{"name":"I_ini","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_I","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_I","dim":[],"mult":[]},"stage":"user"},{"name":"initial_R","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_R","dim":[],"mult":[]},"stage":"user"},{"name":"initial_S","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_S","dim":[],"mult":[]},"stage":"user"},{"name":"N","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_N","dim":[],"mult":[]},"stage":"time"},{"name":"n_IR","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_n_IR","dim":[],"mult":[]},"stage":"time"},{"name":"n_SI","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_n_SI","dim":[],"mult":[]},"stage":"time"},{"name":"nsim","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_R","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"p_IR","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"p_SI","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_p_SI","dim":[],"mult":[]},"stage":"time"},{"name":"R","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_R","dim":[],"mult":[]},"stage":"time"},{"name":"S","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_S","dim":[],"mult":[]},"stage":"time"},{"name":"S_ini","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"sigma","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"}],"variable":{"length":["+",["+","dim_I","dim_R"],"dim_S"],"contents":[{"name":"S","offset":0,"initial":"initial_S"},{"name":"I","offset":"dim_S","initial":"initial_I"},{"name":"R","offset":"offset_variable_R","initial":"initial_R"}]},"output":{"length":0,"contents":[]}},"equations":[{"name":"alloc_initial_I","type":"alloc","source":[33],"depends":{"functions":[],"variables":["dim_I"]},"lhs":"initial_I"},{"name":"alloc_initial_R","type":"alloc","source":[34],"depends":{"functions":[],"variables":["dim_R"]},"lhs":"initial_R"},{"name":"alloc_initial_S","type":"alloc","source":[32],"depends":{"functions":[],"variables":["dim_S"]},"lhs":"initial_S"},{"name":"alloc_N","type":"alloc","source":[31],"depends":{"functions":[],"variables":["dim_N"]},"lhs":"N"},{"name":"alloc_n_IR","type":"alloc","source":[37],"depends":{"functions":[],"variables":["dim_n_IR"]},"lhs":"n_IR"},{"name":"alloc_n_SI","type":"alloc","source":[36],"depends":{"functions":[],"variables":["dim_n_SI"]},"lhs":"n_SI"},{"name":"alloc_p_SI","type":"alloc","source":[35],"depends":{"functions":[],"variables":["dim_p_SI"]},"lhs":"p_SI"},{"name":"beta","type":"user","source":[26],"depends":null,"lhs":"beta","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"dim_I","type":"expression_scalar","source":[33],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_I","rhs":{"value":"nsim"}},{"name":"dim_N","type":"expression_scalar","source":[31],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_N","rhs":{"value":"nsim"}},{"name":"dim_n_IR","type":"expression_scalar","source":[37],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_n_IR","rhs":{"value":"nsim"}},{"name":"dim_n_SI","type":"expression_scalar","source":[36],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_n_SI","rhs":{"value":"nsim"}},{"name":"dim_p_SI","type":"expression_scalar","source":[35],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_p_SI","rhs":{"value":"nsim"}},{"name":"dim_R","type":"expression_scalar","source":[34],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_R","rhs":{"value":"nsim"}},{"name":"dim_S","type":"expression_scalar","source":[32],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_S","rhs":{"value":"nsim"}},{"name":"I_ini","type":"user","source":[25],"depends":null,"lhs":"I_ini","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"initial_I","type":"expression_array","source":[20],"depends":{"functions":["length"],"variables":["dim_I","I_ini"]},"lhs":"initial_I","rhs":[{"index":[{"value":[":",1,["length","I"]],"is_range":true,"index":"i"}],"value":"I_ini"}]},{"name":"initial_R","type":"expression_array","source":[21],"depends":{"functions":["length"],"variables":["dim_R"]},"lhs":"initial_R","rhs":[{"index":[{"value":[":",1,["length","R"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"initial_S","type":"expression_array","source":[19],"depends":{"functions":["length"],"variables":["dim_S","S_ini"]},"lhs":"initial_S","rhs":[{"index":[{"value":[":",1,["length","S"]],"is_range":true,"index":"i"}],"value":"S_ini"}]},{"name":"N","type":"expression_array","source":[16],"depends":{"functions":["length","+","["],"variables":["dim_N","S","i","I","R","alloc_N"]},"lhs":"N","rhs":[{"index":[{"value":[":",1,["length","N"]],"is_range":true,"index":"i"}],"value":["+",["+",["[","S","i"],["[","I","i"]],["[","R","i"]]}]},{"name":"n_IR","type":"expression_array","source":[13],"depends":{"functions":["length","rbinom","["],"variables":["dim_n_IR","I","i","p_IR","alloc_n_IR"]},"lhs":"n_IR","rhs":[{"index":[{"value":[":",1,["length","n_IR"]],"is_range":true,"index":"i"}],"value":["rbinom",["[","I","i"],"p_IR"]}]},{"name":"n_SI","type":"expression_array","source":[12],"depends":{"functions":["length","rbinom","["],"variables":["dim_n_SI","S","i","p_SI","alloc_n_SI"]},"lhs":"n_SI","rhs":[{"index":[{"value":[":",1,["length","n_SI"]],"is_range":true,"index":"i"}],"value":["rbinom",["[","S","i"],["[","p_SI","i"]]}]},{"name":"nsim","type":"user","source":[30],"depends":null,"lhs":"nsim","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"offset_variable_R","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_I","dim_S"]},"lhs":"offset_variable_R","rhs":{"value":["+","dim_I","dim_S"]}},{"name":"p_IR","type":"expression_scalar","source":[8],"depends":{"functions":["-","exp"],"variables":["sigma"]},"lhs":"p_IR","rhs":{"value":["-",1,["exp",["-","sigma"]]]}},{"name":"p_SI","type":"expression_array","source":[7],"depends":{"functions":["length","-","exp","/","*","["],"variables":["dim_p_SI","beta","I","i","N","alloc_p_SI"]},"lhs":"p_SI","rhs":[{"index":[{"value":[":",1,["length","p_SI"]],"is_range":true,"index":"i"}],"value":["-",1,["exp",["/",["*",["-","beta"],["[","I","i"]],["[","N","i"]]]]}]},{"name":"S_ini","type":"user","source":[24],"depends":null,"lhs":"S_ini","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"sigma","type":"user","source":[27],"depends":null,"lhs":"sigma","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"update_I","type":"expression_array","source":[3],"depends":{"functions":["length","-","+","["],"variables":["dim_I","I","i","n_SI","n_IR"]},"lhs":"I","rhs":[{"index":[{"value":[":",1,["length","I"]],"is_range":true,"index":"i"}],"value":["-",["+",["[","I","i"],["[","n_SI","i"]],["[","n_IR","i"]]}]},{"name":"update_R","type":"expression_array","source":[4],"depends":{"functions":["length","+","["],"variables":["dim_R","R","i","n_IR"]},"lhs":"R","rhs":[{"index":[{"value":[":",1,["length","R"]],"is_range":true,"index":"i"}],"value":["+",["[","R","i"],["[","n_IR","i"]]}]},{"name":"update_S","type":"expression_array","source":[2],"depends":{"functions":["length","-","["],"variables":["dim_S","S","i","n_SI"]},"lhs":"S","rhs":[{"index":[{"value":[":",1,["length","S"]],"is_range":true,"index":"i"}],"value":["-",["[","S","i"],["[","n_SI","i"]]}]}],"components":{"create":{"variables":[],"equations":[]},"user":{"variables":[],"equations":["beta","I_ini","nsim","S_ini","sigma","dim_I","dim_N","dim_n_IR","dim_n_SI","dim_p_SI","dim_R","dim_S","p_IR","alloc_initial_I","alloc_initial_R","alloc_initial_S","alloc_N","alloc_n_IR","alloc_n_SI","alloc_p_SI","initial_I","initial_R","initial_S","offset_variable_R"]},"initial":{"variables":[],"equations":[]},"rhs":{"variables":["S","I","R"],"equations":["N","n_IR","p_SI","update_R","n_SI","update_I","update_S"]},"output":{"variables":[],"equations":[]}},"user":[{"name":"beta","has_default":false},{"name":"I_ini","has_default":false},{"name":"nsim","has_default":false},{"name":"S_ini","has_default":false},{"name":"sigma","has_default":false}],"interpolate":{"min":[],"max":[],"critical":[]},"source":["## Core equations for transitions between compartments:","update(S[]) <- S[i] - n_SI[i]","update(I[]) <- I[i] + n_SI[i] - n_IR[i]","update(R[]) <- R[i] + n_IR[i]","","## Individual probabilities of transition:","p_SI[] <- 1 - exp(-beta * I[i] / N[i])","p_IR <- 1 - exp(-sigma)","","## Draws from binomial distributions for numbers changing between","## compartments:","n_SI[] <- rbinom(S[i], p_SI[i])","n_IR[] <- rbinom(I[i], p_IR)","","## Total population size","N[] <- S[i] + I[i] + R[i]","","## Initial states:","initial(S[]) <- S_ini","initial(I[]) <- I_ini","initial(R[]) <- 0","","## User defined parameters - default in parentheses:","S_ini <- user()","I_ini <- user()","beta <- user()","sigma <- user()","","## Number of replicates","nsim <- user()","dim(N) <- nsim","dim(S) <- nsim","dim(I) <- nsim","dim(R) <- nsim","dim(p_SI) <- nsim","dim(n_SI) <- nsim","dim(n_IR) <- nsim"]}
